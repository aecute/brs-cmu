{% extends "base.html" %}
{% block title %}Reservation | {{ block.super }} {% endblock %}

<style>
  {% block style %}
  body
  {
      background: url(http://www.listofdownload.com/wp-content/uploads/2013/11/Londonstreet-Double-decker-bus-TiltShift-Wallpaper-1920x1200.jpg) no-repeat center center fixed; 
      -webkit-background-size: cover;
      -moz-background-size: cover;
      -o-background-size: cover;
      background-size: cover;
  }
  {% endblock %}
</style>

{% block content %}

    <!-- Fixed navbar -->
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Bus Reservation system</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="/">Bus Schedule</a></li>
            <li  class="active"><a href="#">Reservation</a></li>
            <li><a href="/drivers">Drivers Status</a></li>
          </ul>

          <ul class="nav navbar-nav navbar-right">

            {% if user.is_authenticated %}
            <li><a href="#">Welcome, {{ user.username }}</a></li>
            {% endif %}

            <li><a href='{% url "logout" %}'>logout</a></li>
          </ul>

        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container">

    <br><br><br>

      <div class="panel panel-default">
        <div class="panel-heading">Search</div>
        <div class="panel-body">

        <div class="row">
          <div class="col-sm-2"></div>
          <div class="col-sm-8">

            <form class="form-inline" role="form" method="post">{% csrf_token %}

              <div class="form-group">
                <label for="origin">Origin:</label>
                <input type="text" class="form-control" name="origin" placeholder="Enter origin">

                <label for="destination">Destination:</label>
                <input type="text" class="form-control" name="destination" placeholder="Enter destination">
              </div>

              <button type="submit" class="btn btn-default">Search</button>

            </form>

          </div>
          <div class="col-sm-2"></div>
        </div>

          

        </div>
      </div>

      <div class="panel panel-primary">
        <div class="panel-heading">Result</div>
        <div class="panel-body">

          {% if results.exists == False %}

            <div class="alert alert-danger">
            <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
              <strong>Fail!</strong> Please enter search first or Not Found.
            </div>

          {% else %}
            <div class="table-responsive"> 
              <table  class="table table-hover">
                <tr>
                  <th>Company Name</th>
                  <th>Bus ID</th>
                  <th>Origin</th>
                  <th>Destination</th>
                  <th>Platform</th>
                  <th>Date</th>
                  <th>Price</th>
                </tr>

                {% for result in results %}

                <tr>
                  <td> {{ result.company_name }} </td>
                  <td> {{ result.bus_id }} </td>
                  <td> {{ result.origin }} </td>
                  <td> {{ result.destination }} </td>
                  <td> {{ result.platform }} </td>
                  <td>  {{ result.date }} </td>
                  <td> {{ result.price }} </td>
                </tr>

                {% endfor %}
              </table>
            </div>

        {% endif %}
          
        </div>
      </div>

    </div> 

{% endblock %}


<!--   company_name = models.ForeignKey(Bus_company, default=1)
  bus_id = models.ForeignKey(Bus, default=1)
  origin = models.CharField(max_length=40)
  destination = models.CharField(max_length=40)
  platform = models.CharField(max_length=40)
  date = models.DateTimeField()
  price = models.IntegerField()

 -->

